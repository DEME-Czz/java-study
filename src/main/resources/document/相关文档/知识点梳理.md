#### 接口的幂等性

**接口幂等性**是指用户对于同一操作发起的一次请求或者多次请求的结果是一致的，不会因为多次点击而产生了副作用。

##### 产生的场景

- 有时我们在填写某些`form表单`时，保存按钮不小心快速点了两次，表中竟然产生了两条重复的数据，只是id不一样。
- **接口超时**引用的**重试机制**
- mq消费者在读取消息时，有时候会读取到`重复消息`

##### 解决办法

- insert前先select

- 加悲观锁

- 加乐观锁

- 加唯一索引

- 建防重表

- 根据状态机

- 加分布式锁

- 获取token

  

#### Redis相关知识点

##### 常见的面试题：

- 如何解决缓存雪崩？
- 如何解决缓存穿透？
- 如何保证缓存与数据库双写时一致的问题？

###### 如何解决缓存雪崩？

缓存雪崩导致的



##### 过期策略（Redis采用的是**惰性删除+定期删除**两种策略）

- 定时删除(对内存友好，对CPU不友好)

- - 到时间点上就把所有过期的键删除了。

- 惰性删除(对CPU极度友好，对内存极度不友好)

- - 每次从键空间取键的时候，判断一下该键是否过期了，如果过期了就删除。

- 定期删除(折中)

- - **每隔**一段时间去删除过期键，**限制**删除的执行时长和频率。



